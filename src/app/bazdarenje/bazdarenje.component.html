<div class="servis-container">
  <h2>Nalog ba탑darenja</h2>
  <button class="noviNalog" (click)="toggleForm()">Novi nalog ba탑darenja</button>
  <div *ngIf="formVisible">
    <div class="servis-info">
      <div class="info-section">
        <strong><label for="datum">Datum: </label></strong>
        <span id="datum">{{ currentDate }}</span>
        <p><strong>Broj naloga:</strong> {{ bazdarenjeNalogNumber }}</p>
      </div>
      <div class="info-section">
        <label for="contact"><strong>Kontakt:</strong></label>
        <input type="text" id="contact" [(ngModel)]="servicerContact" />
      </div>
    </div>
    <div class="tool-info">
      <label for="toolId"><strong>ID alata:</strong></label>
      <mat-form-field appearance="fill">
        <mat-label>ID alata</mat-label>
        <mat-select [(ngModel)]="selectedTool" (selectionChange)="onToolSelected($event.value)">
          <mat-option *ngFor="let tool of filteredTools | async" [value]="tool">
            {{ tool.ets_id }}
          </mat-option>
        </mat-select>
      </mat-form-field>
      <label for="toolName"><strong>Ime alata:</strong></label>
      <mat-form-field appearance="fill">
        <mat-label>Ime alata</mat-label>
        <mat-select [(ngModel)]="selectedTool" (selectionChange)="onToolSelected($event.value)">
          <mat-option *ngFor="let tool of filteredTools | async" [value]="tool">
            {{ tool.naziv }}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>
    <div class="bazdarenje-purpose">
      <label for="bazdarenjePurpose">Razlog ba탑darenja:</label>
      <textarea id="bazdarenjePurpose" [(ngModel)]="bazdarenjePurpose"></textarea>
    </div>
    <div class="servicer-field">
      <label for="servicer">Serviser:</label>
      <mat-form-field>
        <mat-label>Serviser</mat-label>
        <mat-select [(value)]="selectedServicer" (selectionChange)="onServicerSelected($event)">
          <mat-option *ngFor="let servicer of filteredServicers | async" [value]="servicer">
            {{ servicer.serviser_kompanija }}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>
    <div class="izdaj-btn-container">
      <button (click)="izdajNaBazdarenje()">Izdaj na ba탑darenje</button>
    </div>
  </div>
</div>